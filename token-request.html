<!DOCTYPE html>
<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
        <script src="js/helper.js"></script>
    </head>
    <body>
        <script>
                        
            console.log(getUrlParameter('state'), getUrlParameter('code'), window.btoa('TaniaPap-Listings-PRD-5bffbb2e5-668519d8:PRD-bffbb2e5c479-0261-440a-8af8-aa48'));
            var invocation = new XMLHttpRequest();
            var url = 'https://api.sandbox.ebay.com/identity/v1/oauth2/token';

            
            if(invocation) {    
                invocation.open('POST', url, true);
                invocation.setRequestHeader('Authorization', 'Basic ' + window.btoa('TaniaPap-Listings-PRD-5bffbb2e5-668519d8:PRD-bffbb2e5c479-0261-440a-8af8-aa48'));
                invocation.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                invocation.onreadystatechange = handler;
                invocation.send('grant_type=authorization_code&code=' + getUrlParameter('code') + '&redirect_uri=Tania_Papazafei-TaniaPap-Listin-nuhlzm'); 
            }
            
            
            function handler(data) {
                console.log(data);
            }
            
            /* $.ajax({ 
                url: 'https://api.sandbox.ebay.com/identity/v1/oauth2/token',
                method: 'POST',
                dataType: 'json',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'Authorization': 'Basic ' + window.btoa('TaniaPap-Listings-PRD-5bffbb2e5-668519d8:PRD-bffbb2e5c479-0261-440a-8af8-aa48')
                },
                data: {
                    grant_type: 'authorization_code',
                    code : getUrlParameter('code'),
                    redirect_uri : 'Tania_Papazafei-TaniaPap-Listin-nuhlzm'
                },
                beforeSend: function(xhr){
                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                    xhr.setRequestHeader('Authorization', 'Basic ' + window.btoa('TaniaPap-Listings-PRD-5bffbb2e5-668519d8:PRD-bffbb2e5c479-0261-440a-8af8-aa48'));
                },
                success: function(data) { console.log(data); }
            }); */
        </script>
    </body>
</html>